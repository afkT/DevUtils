apply from: rootProject.file(files.sonatype_config)

// https://vanniktech.github.io/gradle-maven-publish-plugin/central
// https://vanniktech.github.io/gradle-maven-publish-plugin/what

mavenPublishing {
    // 发布到 MavenCentral
    publishToMavenCentral(true)
    // 全部进行签名
    signAllPublications()

    // 设置版本信息 => io.github.afkt, DevJava, 1.5.4
    coordinates(projectGroupId, projectArtifactId, projectVersionName)

    pom {
        name = projectName
        url = projectSiteUrl
        packaging = projectPackaging
        version = projectVersionName
        description = "${projectName}:${projectVersionName} publish"
        licenses {
            license {
                name = "The Apache Software License, Version 2.0"
                url = "http://www.apache.org/licenses/LICENSE-2.0.txt"
            }
        }
        developers {
            developer {
                id = developerId
                name = developerName
                email = developerEmail
                url = projectSiteUrl
            }
        }
        scm {
            connection = projectGitUrl
            developerConnection = projectGitUrl
            url = projectSiteUrl
        }
//        withXml {
//            def dependenciesNode = asNode().appendNode("dependencies")
//            project.configurations.implementation.allDependencies.each {
//                def dependencyNode = dependenciesNode.appendNode("dependency")
//                dependencyNode.appendNode("groupId", it.group)
//                dependencyNode.appendNode("artifactId", it.name)
//                dependencyNode.appendNode("version", it.version)
//            }
//        }
    }
}

// module gradle
//
// tasks-build-assemble
//
// publishing-publishToMavenCentral